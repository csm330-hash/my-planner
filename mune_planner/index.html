<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mune planner v43</title>
    <style>
        :root { --bg-color: #a2c2e1; --card-bg: #ffffff; }
        body { background-color: var(--bg-color); font-family: 'Pretendard', sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        /* í—¤ë” ë° ìœ í‹¸ë¦¬í‹° ë°” (v36 ìŠ¤íƒ€ì¼ ë³µêµ¬) */
        .header { width: 100%; max-width: 1200px; margin-bottom: 15px; }
        .header h1 { font-size: 2.2rem; margin: 0; font-weight: 900; }
        .header .subtitle { font-size: 0.85rem; color: #555; }
        
        .util-bar { 
            width: 100%; max-width: 1200px; background: white; border-radius: 10px; 
            padding: 10px; margin-bottom: 20px; display: flex; gap: 8px; flex-wrap: wrap;
            border: 1px solid #000; box-shadow: 2px 2px 0px #000;
        }
        .util-btn { border: 1px solid #000; padding: 5px 12px; border-radius: 8px; background: #fff; font-weight: bold; cursor: pointer; font-size: 0.85rem; }
        .util-btn.black { background: #000; color: #fff; }
        .date-input { border: 1px solid #000; padding: 5px; border-radius: 8px; margin-left: auto; }

        /* ë©”ì¸ ë ˆì´ì•„ì›ƒ */
        .main-layout { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; width: 100%; max-width: 1200px; }
        .card { background: var(--card-bg); border-radius: 30px; padding: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); min-height: 400px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .card-title { font-size: 1.2rem; font-weight: bold; }
        
        .voice-btn { background: #ffcc00; border: none; padding: 4px 10px; border-radius: 20px; font-weight: bold; cursor: pointer; font-size: 0.75rem; }
        .result-area { font-size: 0.95rem; color: #444; padding: 10px; background: #f0f4f8; border-radius: 10px; margin-top: 10px; min-height: 40px; }
        
        /* ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .list-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; font-size: 0.9rem; }
        .dday-box { background: #eee; border-radius: 12px; padding: 15px; display: flex; justify-content: space-between; margin-bottom: 15px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="header">
        <h1>mune planner</h1>
        <div class="subtitle">MUNE Professional Dashboard</div>
    </div>

    <div class="util-bar">
        <button class="util-btn">ì½ê¸°</button>
        <button class="util-btn">ì •ì§€</button>
        <button class="util-btn">ë£¨í‹´ë³µì‚¬</button>
        <button class="util-btn">ê±´ê°•ë³µì‚¬</button>
        <button class="util-btn black">ë‹¤ì¤‘ë¶™ì—¬ë„£ê¸°</button>
        <button class="util-btn">ë°±ì—…</button>
        <button class="util-btn" style="border-style: dashed;">ê°€ì ¸ì˜¤ê¸°</button>
        <input type="date" class="date-input" value="2026-01-23">
    </div>

    <div class="main-layout">
        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ“… ì¼ì • & ê±´ê°•</span>
                <button class="voice-btn" onclick="startVoice('routine')">ğŸ¤ ìŒì„±ì¶”ê°€</button>
            </div>
            <div id="routine-result" class="result-area">ê¸°ë¡ì„ ë§ì”€í•˜ì„¸ìš”.</div>
            <div id="routine-list">
                </div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ’Š ê±´ê°• ê´€ë¦¬</span>
                <button class="voice-btn" onclick="startVoice('health')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div id="health-result" class="result-area">ë¬¼ ë§ˆì‹œê¸°, ìš´ë™ ë“±</div>
            <div id="health-list"></div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ’¡ ì°½ì‘ ë©”ëª¨</span>
                <button class="voice-btn" onclick="startVoice('idea')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div class="dday-box">
                <span>GCP ë§Œë£Œ: 2026.03.10</span>
                <span id="gcp-dday">D-46</span>
            </div>
            <div id="idea-result" class="result-area">ì•„ì´ë””ì–´ë¥¼ ë§ì”€í•˜ì„¸ìš”.</div>
            
            <div class="card-header" style="margin-top:20px;">
                <span class="card-title">ğŸ¥— ì‹ë‹¨ ê¸°ë¡</span>
                <button class="voice-btn" onclick="startVoice('diet')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div id="diet-result" class="result-area">ì‹ë‹¨ ë‚´ìš©ì„ ë§ì”€í•˜ì„¸ìš”.</div>
        </div>
    </div>

    <script>
        // í•œêµ­ ì‹œê°„ ë° D-Day
        function updateDisplay() {
            const now = new Date();
            const gcpDate = new Date('2026-03-10T00:00:00');
            const today = new Date(now.toLocaleString('en-US', {timeZone: 'Asia/Seoul'}));
            today.setHours(0,0,0,0);
            const diff = Math.ceil((gcpDate - today) / (1000*60*60*24));
            document.getElementById('gcp-dday').innerText = `D-${diff}`;
        }

        // ì§€ëŠ¥í˜• ìŒì„± ì¸ì‹ ë¡œì§ í†µí•©
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.lang = 'ko-KR';
        let currentTarget = '';

        function startVoice(target) {
            currentTarget = target;
            recognition.start();
            document.getElementById(`${target}-result`).innerText = "ë“£ê³  ìˆì–´ìš”...";
        }

        recognition.onresult = (event) => {
            let transcript = event.results[0][0].transcript;
            const resEl = document.getElementById(`${currentTarget}-result`);
            
            if (transcript.includes("ì‚­ì œ") || transcript.includes("ì§€ì›Œ")) {
                resEl.innerText = "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
                return;
            }

            if (currentTarget === 'idea') {
                const fillers = ["ìŒ", "ì–´", "ê·¸ë‹ˆê¹Œ", "ìˆì–ì•„"];
                fillers.forEach(f => transcript = transcript.replace(f, ""));
                transcript = "ğŸ“Œ " + transcript.trim();
            }

            if (currentTarget === 'routine') {
                const timeMatch = transcript.match(/(\d+)\s*ì‹œ\s*(?:(\d+)\s*ë¶„)?/);
                if (timeMatch) {
                    const hh = timeMatch[1]; const mm = timeMatch[2] || "00";
                    const task = transcript.replace(timeMatch[0], "").trim();
                    resEl.innerHTML = `<b style="color:red;">[${hh}:${mm}]</b> ${task}`;
                    return;
                }
            }
            resEl.innerText = transcript;
        };

        updateDisplay();
    </script>
</body>
</html>
