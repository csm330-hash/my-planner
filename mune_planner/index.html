<script>
    // ... (앞부분 생략: 시간/디스플레이 로직은 동일) ...

    recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        const resultElement = document.getElementById(`${currentTarget}-result`);
        
        // [삭제 명령 확인] 문장 끝에 '삭제', '지워', '취소'가 포함된 경우
        if (transcript.includes("삭제") || transcript.includes("지워") || transcript.includes("취소")) {
            resultElement.innerText = "기록을 삭제했습니다.";
            resultElement.style.color = "#ff4444"; // 삭제 시 빨간색 표시
            
            // 2초 뒤에 원래 안내 문구로 복구
            setTimeout(() => {
                resultElement.innerText = "다시 말씀해 주세요.";
                resultElement.style.color = "#ddd";
            }, 2000);
            return; // 삭제 명령 수행 후 종료
        }

        // [일반 기록 로직] - 이전 v37의 시간 파싱 기능 포함
        let hour = "";
        let minute = "00";
        let task = transcript;

        const timeMatch = transcript.match(/(\d+)\s*시\s*(?:(\d+)\s*분)?/);
        
        resultElement.style.color = "#ffcc00"; // 기록 시 노란색 표시
        if (timeMatch) {
            hour = timeMatch[1];
            minute = timeMatch[2] || "00";
            task = transcript.replace(timeMatch[0], "").replace(/오전|오후/g, "").trim();
            resultElement.innerHTML = `<b>[${hour}:${minute}]</b> ${task}`;
        } else {
            resultElement.innerText = transcript;
        }
    };
</script>






