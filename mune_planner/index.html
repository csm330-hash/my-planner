<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mune planner v37</title>
    <style>
        body {
            background-color: #1a2a44; color: white;
            font-family: 'Pretendard', sans-serif;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; margin: 0; padding: 20px;
        }
        .container {
            width: 100%; max-width: 400px; text-align: center;
            padding: 25px; border-radius: 30px;
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        #clock { font-size: 3.5rem; font-weight: 800; margin-bottom: 20px; }
        .milestone-item {
            display: flex; justify-content: space-between;
            margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px; font-size: 1rem;
        }
        .section-card {
            background: rgba(255, 255, 255, 0.1); border-radius: 20px;
            padding: 15px; margin-top: 20px; text-align: left;
        }
        .section-title { font-weight: bold; color: #ffcc00; margin-bottom: 10px; display: block; }
        .voice-btn {
            background: #ffcc00; border: none; padding: 8px 15px;
            border-radius: 50px; font-weight: bold; cursor: pointer;
            color: #1a2a44; font-size: 0.8rem; margin-top: 5px;
        }
        .voice-btn.active { background: #ff4444; color: white; animation: pulse 1.5s infinite; }
        .result-text { font-size: 0.85rem; color: #ddd; margin-top: 8px; min-height: 1.2rem; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="container">
        <div id="clock">00:00:00</div>
        
        <div class="milestone-item">
            <span>GCP ë§Œë£Œ (3/10)</span>
            <span id="gcp-dday" style="color:#ffcc00; font-weight:bold;">-</span>
        </div>

        <div class="section-card">
            <span class="section-title">âœ… ë£¨í‹´ & ê±´ê°•</span>
            <button class="voice-btn" onclick="startVoice('routine')">ğŸ¤ ìŒì„± ì¶”ê°€</button>
            <div id="routine-result" class="result-text">ì˜ˆ: 11ì‹œ 40ë¶„ì— ì˜ì–‘ì œ ë¨¹ê¸°</div>
        </div>

        <div class="section-card">
            <span class="section-title">ğŸ’¡ ì•„ì´ë””ì–´</span>
            <button class="voice-btn" onclick="startVoice('idea')">ğŸ¤ ìŒì„± ê¸°ë¡</button>
            <div id="idea-result" class="result-text">ë– ì˜¤ë¥´ëŠ” ìƒê°ì„ ë§ì”€í•˜ì„¸ìš”.</div>
        </div>

        <div class="section-card">
            <span class="section-title">ğŸ¥— ì‹ë‹¨ ê¸°ë¡</span>
            <button class="voice-btn" onclick="startVoice('diet')">ğŸ¤ ìŒì„± ê¸°ë¡</button>
            <div id="diet-result" class="result-text">ë¬´ì—‡ì„ ë“œì…¨ë‚˜ìš”?</div>
        </div>
    </div>

    <script>
        // 1. í•œêµ­ ì‹œê°„ ì‹œê³„
        function updateDisplay() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('ko-KR', {
                timeZone: 'Asia/Seoul', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit'
            });
            const gcpDate = new Date('2026-03-10T00:00:00');
            const diff = Math.ceil((gcpDate - now) / (1000*60*60*24));
            document.getElementById('gcp-dday').innerText = `D-${diff}`;
        }

        // 2. ìŒì„± ì¸ì‹ ë° ì •êµí•œ ì‹œê°„ íŒŒì‹±
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.lang = 'ko-KR';
        let currentTarget = '';

        function startVoice(target) {
            currentTarget = target;
            recognition.start();
            document.getElementById(`${target}-result`).innerText = "ë“£ê³  ìˆì–´ìš”...";
        }

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            
            // [í•µì‹¬] ì‹œì™€ ë¶„ì„ ì •í™•í•˜ê²Œ ë¶„ë¦¬í•˜ëŠ” ê·œì¹™
            let hour = "";
            let minute = "00";
            let task = transcript;

            // 'ì‹œ'ì™€ 'ë¶„' ì¶”ì¶œ ì‹œë„
            const timeMatch = transcript.match(/(\d+)\s*ì‹œ\s*(?:(\d+)\s*ë¶„)?/);
            
            if (timeMatch) {
                hour = timeMatch[1];
                minute = timeMatch[2] || "00"; // ë¶„ì´ ì—†ìœ¼ë©´ 00ë¶„ìœ¼ë¡œ ì²˜ë¦¬
                
                // ì œëª©ì—ì„œ ì‹œê°„ ê´€ë ¨ ë‹¨ì–´(ì‹œ, ë¶„, ì˜¤ì „, ì˜¤í›„)ë¥¼ ì‹¹ ì§€ìš°ê¸°
                task = transcript.replace(timeMatch[0], "").replace(/ì˜¤ì „|ì˜¤í›„/g, "").trim();
                
                document.getElementById(`${currentTarget}-result`).innerHTML = 
                    `<b style="color:#ffcc00;">[${hour}:${minute}]</b> ${task}`;
            } else {
                // ì‹œê°„ì´ í¬í•¨ë˜ì§€ ì•Šì€ ê²½ìš° (ì•„ì´ë””ì–´ë‚˜ ì‹ë‹¨)
                document.getElementById(`${currentTarget}-result`).innerText = "ê¸°ë¡ë¨: " + transcript;
            }
        };

        recognition.onerror = () => {
            alert("ìŒì„± ì¸ì‹ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë§ˆì´í¬ ê¶Œí•œì„ í™•ì¸í•´ ì£¼ì„¸ìš”.");
        };

        setInterval(updateDisplay, 1000);
        updateDisplay();
    </script>
</body>
</html>





