<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mune planner v44</title>
    <style>
        :root { --bg-color: #a2c2e1; --card-bg: #ffffff; }
        body { background-color: var(--bg-color); font-family: 'Pretendard', sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        /* 1. ìƒë‹¨ í”„ë ˆì„ ë³µêµ¬ */
        .header { width: 100%; max-width: 1200px; margin-bottom: 15px; }
        .header h1 { font-size: 2.2rem; margin: 0; font-weight: 900; }
        .header .subtitle { font-size: 0.85rem; color: #555; }
        
        .util-bar { 
            width: 100%; max-width: 1200px; background: white; border-radius: 10px; 
            padding: 10px; margin-bottom: 20px; display: flex; gap: 8px; flex-wrap: wrap;
            border: 1px solid #000; box-shadow: 2px 2px 0px #000;
        }
        .util-btn { border: 1px solid #000; padding: 5px 12px; border-radius: 8px; background: #fff; font-weight: bold; cursor: pointer; }
        .util-btn.black { background: #000; color: #fff; }

        /* 2. ì¹´ë“œ ë° ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ë³µêµ¬ */
        .main-layout { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; width: 100%; max-width: 1200px; }
        .card { background: var(--card-bg); border-radius: 30px; padding: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); min-height: 450px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        
        /* 3. ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ (ë°˜ë³µ/ì•Œë¦¼ ì•„ì´ì½˜ í¬í•¨) */
        .list-item { display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid #eee; }
        .icon-btn { cursor: pointer; opacity: 0.6; font-size: 1.1rem; }
        .icon-btn.active { opacity: 1; color: blue; }
        .time-input { border: none; font-weight: bold; width: 50px; font-size: 0.9rem; }
        .text-input { border: none; flex-grow: 1; font-size: 0.95rem; outline: none; }

        /* ìŒì„± ì¸ì‹ ë²„íŠ¼ */
        .voice-btn { background: #ffcc00; border: none; padding: 5px 12px; border-radius: 20px; font-weight: bold; cursor: pointer; font-size: 0.8rem; }
    </style>
</head>
<body>

    <div class="header">
        <h1>mune planner</h1>
        <div class="subtitle">MUNE Professional Dashboard</div>
    </div>

    <div class="util-bar">
        <button class="util-btn" onclick="speakAll()">ì½ê¸°</button>
        <button class="util-btn" onclick="stopSpeak()">ì •ì§€</button>
        <button class="util-btn" onclick="copyList('routine')">ë£¨í‹´ë³µì‚¬</button>
        <button class="util-btn" onclick="copyList('health')">ê±´ê°•ë³µì‚¬</button>
        <button class="util-btn black">ë‹¤ì¤‘ë¶™ì—¬ë„£ê¸°</button>
        <button class="util-btn" onclick="exportData()">ë°±ì—…</button>
        <button class="util-btn" onclick="document.getElementById('fileInput').click()">ê°€ì ¸ì˜¤ê¸°</button>
        <input type="file" id="fileInput" style="display:none" onchange="importData(this)">
        <input type="date" class="date-input" value="2026-01-23" style="margin-left:auto; border:1px solid #000; border-radius:5px; padding:5px;">
    </div>

    <div class="main-layout">
        <div class="card">
            <div class="card-header">
                <span style="font-size:1.2rem; font-weight:bold;">ğŸ“… ë£¨í‹´</span>
                <button class="voice-btn" onclick="startVoice('routine')">ğŸ¤ ìŒì„±ì¶”ê°€</button>
            </div>
            <div id="routine-list">
                </div>
            <button onclick="addRow('routine')" style="margin-top:10px; background:none; border:none; color:#777; cursor:pointer;">+ ì¶”ê°€</button>
        </div>

        <div class="card">
            <div class="card-header">
                <span style="font-size:1.2rem; font-weight:bold;">ğŸ’Š ê±´ê°•</span>
                <button class="voice-btn" onclick="startVoice('health')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div id="health-list"></div>
            <button onclick="addRow('health')" style="margin-top:10px; background:none; border:none; color:#777; cursor:pointer;">+ ì¶”ê°€</button>
        </div>

        <div class="card">
            <div class="card-header">
                <span style="font-size:1.2rem; font-weight:bold;">ğŸ’¡ ì°½ì‘ ë©”ëª¨</span>
                <button class="voice-btn" onclick="startVoice('idea')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div style="background:#eee; border-radius:10px; padding:15px; margin-bottom:15px; display:flex; justify-content:space-between;">
                <span style="font-size:0.8rem;">GCP ë§Œë£Œ: 2026.03.10</span>
                <span style="font-weight:900; font-size:1.2rem;">D-46</span>
            </div>
            <textarea id="idea-text" style="width:100%; height:150px; border:none; background:#f9f9f9; padding:10px; border-radius:10px; font-size:1rem;" placeholder="ì•„ì´ë””ì–´ ê¸°ë¡..."></textarea>
            
            <div class="card-header" style="margin-top:20px;">
                <span style="font-size:1.2rem; font-weight:bold;">ğŸ¥— ì‹ë‹¨</span>
                <button class="voice-btn" onclick="startVoice('diet')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <textarea id="diet-text" style="width:100%; height:100px; border:none; background:#f9f9f9; padding:10px; border-radius:10px; font-size:1rem;" placeholder="ì‹ë‹¨ ê¸°ë¡..."></textarea>
        </div>
    </div>

    <script>
        // 1. ê¸°ì¡´ ë°ì´í„° ë¡œë“œ ë° ë¦¬ìŠ¤íŠ¸ ìƒì„± í•¨ìˆ˜
        function addRow(target, time="09:00", text="") {
            const list = document.getElementById(`${target}-list`);
            const div = document.createElement('div');
            div.className = 'list-item';
            div.innerHTML = `
                <span class="icon-btn">ğŸ”„</span>
                <span class="icon-btn">ğŸ””</span>
                <input type="text" class="time-input" value="${time}">
                <input type="text" class="text-input" value="${text}" placeholder="ì…ë ¥í•˜ì„¸ìš”">
                <span onclick="this.parentElement.remove()" style="cursor:pointer; color:#ccc;">âœ•</span>
            `;
            list.appendChild(div);
        }

        // 2. ìŒì„± ì¸ì‹ ê¸°ëŠ¥ (ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ì— ìë™ìœ¼ë¡œ ì¤„ ì¶”ê°€)
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.lang = 'ko-KR';

        function startVoice(target) {
            recognition.onresult = (event) => {
                let transcript = event.results[0][0].transcript;
                if (target === 'idea') {
                    document.getElementById('idea-text').value += "ğŸ“Œ " + transcript + "\n";
                } else if (target === 'diet') {
                    document.getElementById('diet-text').value += transcript + ", ";
                } else {
                    const timeMatch = transcript.match(/(\d+)\s*ì‹œ\s*(?:(\d+)\s*ë¶„)?/);
                    let hh = "09", mm = "00", task = transcript;
                    if (timeMatch) {
                        hh = timeMatch[1].padStart(2, '0');
                        mm = (timeMatch[2] || "00").padStart(2, '0');
                        task = transcript.replace(timeMatch[0], "").trim();
                    }
                    addRow(target, `${hh}:${mm}`, task);
                }
            };
            recognition.start();
        }

        // 3. ê°€ì ¸ì˜¤ê¸° ê¸°ëŠ¥ ë³µêµ¬
        function importData(input) {
            const file = input.files[0];
            const reader = new FileReader();
            reader.onload = (e) => {
                alert("ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤! (í…ŒìŠ¤íŠ¸ìš© ë©”ì‹œì§€)");
                // ì‹¤ì œ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬ addRowë¥¼ ì‹¤í–‰í•˜ëŠ” ë¡œì§ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.
            };
            reader.readAsText(file);
        }

        // ì´ˆê¸° í™”ë©´ ì„¸íŒ…
        window.onload = () => {
            addRow('routine', '09:00', 'ê¸°ìƒ');
            addRow('health', '10:00', 'ë¬¼ ë§ˆì‹œê¸°');
        }
    </script>
</body>
</html>

