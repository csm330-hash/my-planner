<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mune planner v42</title>
    <style>
        :root {
            --bg-color: #a2c2e1; /* v36ì˜ í¸ì•ˆí•œ ë¸”ë£¨ ë°°ê²½ */
            --card-bg: #ffffff;
            --accent: #ff4d4d;
            --highlight: #ffcc00;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Pretendard', -apple-system, sans-serif;
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        /* í—¤ë” ì„¹ì…˜ */
        .header { width: 100%; max-width: 1100px; margin-bottom: 20px; text-align: left; }
        .header h1 { font-size: 2.5rem; margin: 0; color: #000; font-weight: 900; }
        .header .subtitle { font-size: 0.95rem; color: #555; margin-top: 5px; font-weight: bold; }

        /* ì‹œê³„ ë° ìƒë‹¨ ë°” */
        .top-bar {
            width: 100%; max-width: 1100px; background: white; border-radius: 12px;
            padding: 12px 20px; margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center;
            border: 1.5px solid #000; box-shadow: 3px 3px 0px #000;
        }

        /* 3ë‹¨ ì¹´ë“œ ë ˆì´ì•„ì›ƒ */
        .main-layout {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px; width: 100%; max-width: 1100px;
        }

        .card {
            background: var(--card-bg); border-radius: 30px; padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); min-height: 280px;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .card-title { font-size: 1.3rem; font-weight: bold; color: #000; }

        .dday-box {
            background: #f0f4f8; border-radius: 15px; padding: 15px;
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; border: 1px dashed #abc;
        }
        .dday-tag { font-weight: 900; font-size: 1.6rem; color: #000; }

        .voice-btn {
            background: var(--highlight); border: none; padding: 8px 18px;
            border-radius: 50px; font-weight: bold; cursor: pointer; font-size: 0.9rem;
            display: flex; align-items: center; gap: 6px; box-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .result-area {
            font-size: 1.05rem; color: #333; line-height: 1.6;
            padding: 15px; background: #f8fbff; border-radius: 15px; min-height: 60px;
            border: 1px solid #edf2f7;
        }

        #clock { font-weight: 900; font-size: 1.3rem; letter-spacing: -0.5px; }
    </style>
</head>
<body>

    <div class="header">
        <h1>mune planner</h1>
        <div class="subtitle">MUNE Professional Dashboard</div>
    </div>

    <div class="top-bar">
        <div style="font-size: 1rem; font-weight: bold;">ğŸ“… 2026-01-23</div>
        <div id="clock">00:00:00</div>
    </div>

    <div class="main-layout">
        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ“… ì¼ì • & ê±´ê°•</span>
                <button class="voice-btn" onclick="startVoice('routine')">ğŸ¤ ì¶”ê°€/ì‚­ì œ</button>
            </div>
            <div id="routine-result" class="result-area">"11ì‹œ 40ë¶„ì— ì˜ì–‘ì œ ë¨¹ê¸°" ì²˜ëŸ¼ ë§ì”€í•˜ì„¸ìš”.</div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ¥— ì‹ë‹¨ ê¸°ë¡</span>
                <button class="voice-btn" onclick="startVoice('diet')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div class="dday-box">
                <span style="font-size: 0.9rem; font-weight: bold; color: #555;">GCP ë§Œë£Œ (3/10)</span>
                <span id="gcp-dday" class="dday-tag">D-46</span>
            </div>
            <div id="diet-result" class="result-area">ì˜¤ëŠ˜ì˜ ì‹ë‹¨ì„ ë§ì”€í•˜ì„¸ìš”.</div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ’¡ ì°½ì‘ ë©”ëª¨</span>
                <button class="voice-btn" onclick="startVoice('idea')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div id="idea-result" class="result-area">ë‘ì„œì—†ì´ ë§ì”€í•˜ì…”ë„ AIê°€ í•µì‹¬ë§Œ ì •ë¦¬í•©ë‹ˆë‹¤.</div>
        </div>
    </div>

    <script>
        // 1. í•œêµ­ ì‹œê°„ ì‹œê³„ ë° D-Day ì„¤ì •
        function updateDisplay() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('ko-KR', {
                timeZone: 'Asia/Seoul', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit'
            });

            const gcpDate = new Date('2026-03-10T00:00:00');
            const today = new Date(now.toLocaleString('en-US', {timeZone: 'Asia/Seoul'}));
            today.setHours(0,0,0,0);
            const diff = Math.ceil((gcpDate - today) / (1000*60*60*24));
            document.getElementById('gcp-dday').innerText = `D-${diff}`;
        }

        // 2. ì§€ëŠ¥í˜• ìŒì„± ì¸ì‹ ì—”ì§„
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.lang = 'ko-KR';
        let currentTarget = '';

        function startVoice(target) {
            currentTarget = target;
            recognition.start();
            document.getElementById(`${target}-result`).innerText = "ë“£ê³  ìˆì–´ìš”... ë§ì”€í•´ ë³´ì„¸ìš”.";
        }

        recognition.onresult = (event) => {
            let transcript = event.results[0][0].transcript;
            const resEl = document.getElementById(`${currentTarget}-result`);
            
            // [ê¸°ëŠ¥ 1] ìŒì„± ì‚­ì œ (ì‚­ì œ, ì§€ì›Œ, ì·¨ì†Œ ë‹¨ì–´ í¬í•¨ ì‹œ)
            if (transcript.includes("ì‚­ì œ") || transcript.includes("ì§€ì›Œ") || transcript.includes("ì·¨ì†Œ")) {
                resEl.innerText = "ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
                resEl.style.color = "var(--accent)";
                setTimeout(() => { 
                    resEl.innerText = "ê¸°ë¡ì„ ë§ì”€í•˜ì„¸ìš”."; 
                    resEl.style.color = "#333";
                }, 1500);
                return;
            }

            // [ê¸°ëŠ¥ 2] ì•„ì´ë””ì–´ ì§€ëŠ¥í˜• ìš”ì•½ (ì¶”ì„ìƒˆ ì œê±°)
            if (currentTarget === 'idea') {
                const fillers = ["ìŒ", "ì–´", "ê·¸ë‹ˆê¹Œ", "ìˆì–ì•„", "ë§‰", "ì•½ê°„", "ì €ê¸°", "ê·¸ëŸ¬ë‹ˆê¹Œ", "ì–´ìŒ"];
                fillers.forEach(f => {
                    const regex = new RegExp(f + "\\s*", "g");
                    transcript = transcript.replace(
