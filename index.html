<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mune planner</title>
    <style>
        :root {
            --bg-color: #a2c2e1; /* v36ì˜ í¸ì•ˆí•œ ë¸”ë£¨ ë°°ê²½ */
            --card-bg: #ffffff;
            --text-main: #333333;
            --accent: #ff4d4d;
            --highlight: #ffcc00;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Pretendard', -apple-system, sans-serif;
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        .header { width: 100%; max-width: 600px; margin-bottom: 20px; text-align: left; }
        .header h1 { font-size: 2rem; margin: 0; color: #000; font-weight: 900; }
        .header .subtitle { font-size: 0.9rem; color: #555; margin-top: 5px; font-weight: bold; }

        .top-bar {
            width: 100%; max-width: 600px; background: white; border-radius: 15px;
            padding: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #000; box-shadow: 3px 3px 0px #000;
        }

        .main-layout {
            display: flex; flex-direction: column; gap: 20px; width: 100%; max-width: 600px;
        }

        .card {
            background: var(--card-bg); border-radius: 25px; padding: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05); position: relative;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .card-title { font-size: 1.1rem; font-weight: bold; color: #000; }

        .dday-tag { font-weight: 900; font-size: 1.2rem; color: var(--accent); }

        .voice-btn {
            background: var(--highlight); border: none; padding: 7px 15px;
            border-radius: 20px; font-weight: bold; cursor: pointer; font-size: 0.8rem;
            color: #000;
        }

        .result-area {
            font-size: 0.95rem; color: #444; line-height: 1.6;
            padding: 12px; background: #f3f7fa; border-radius: 12px; min-height: 40px;
        }

        #clock { font-weight: 800; font-size: 1.2rem; }
    </style>
</head>
<body>

    <div class="header">
        <h1>mune planner</h1>
        <div class="subtitle">MUNE Professional Dashboard</div>
    </div>

    <div class="top-bar">
        <div style="font-size: 0.9rem; font-weight: bold;">GCP ë§Œë£Œ (3/10) <span id="gcp-dday" class="dday-tag">-</span></div>
        <div id="clock">00:00:00</div>
    </div>

    <div class="main-layout">
        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ“… ì¼ì • & ê±´ê°•</span>
                <button class="voice-btn" onclick="startVoice('routine')">ğŸ¤ ì¶”ê°€</button>
            </div>
            <div id="routine-result" class="result-area">ì˜ˆ: 11ì‹œ 40ë¶„ì— ì˜ì–‘ì œ ë¨¹ê¸°</div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ’¡ ì°½ì‘ ë©”ëª¨</span>
                <button class="voice-btn" onclick="startVoice('idea')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div id="idea-result" class="result-area">ìƒê°ë‚˜ëŠ” ì•„ì´ë””ì–´ë¥¼ ë§ì”€í•˜ì„¸ìš”. ì¶”ì„ìƒˆëŠ” AIê°€ ì •ë¦¬í•´ ë“œë ¤ìš”.</div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ¥— ì‹ë‹¨ ê¸°ë¡</span>
                <button class="voice-btn" onclick="startVoice('diet')">ğŸ¤ ê¸°ë¡</button>
            </div>
            <div id="diet-result" class="result-area">ì˜¤ëŠ˜ ë¬´ì—‡ì„ ë“œì…¨ë‚˜ìš”?</div>
        </div>
    </div>

    <script>
        // í•œêµ­ ì‹œê°„ ì‹œê³„ ë° D-Day ì„¤ì •
        function updateDisplay() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('ko-KR', {
                timeZone: 'Asia/Seoul', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit'
            });

            const gcpDate = new Date('2026-03-10T00:00:00');
            const today = new Date(now.toLocaleString('en-US', {timeZone: 'Asia/Seoul'}));
            today.setHours(0,0,0,0);
            const diff = Math.ceil((gcpDate - today) / (1000*60*60*24));
            document.getElementById('gcp-dday').innerText = `D-${diff}`;
        }

        // ì§€ëŠ¥í˜• ìŒì„± ì¸ì‹ ë¡œì§
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.lang = 'ko-KR';
        let currentTarget = '';

        function startVoice(target) {
            currentTarget = target;
            recognition.start();
            document.getElementById(`${target}-result`).innerText = "ë“£ê³  ìˆì–´ìš”... ë§ì”€í•´ ë³´ì„¸ìš”.";
        }

        recognition.onresult = (event) => {
            let transcript = event.results[0][0].transcript;
            const resEl = document.getElementById(`${currentTarget}-result`);
            
            // 1. ìŒì„± ì‚­ì œ ê¸°ëŠ¥ (ì‚­ì œ, ì§€ì›Œ, ì·¨ì†Œ í¬í•¨ ì‹œ ì´ˆê¸°í™”)
            if (transcript.includes("ì‚­ì œ") || transcript.includes("ì§€ì›Œ") || transcript.includes("ì·¨ì†Œ")) {
                resEl.innerText = "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
                setTimeout(() => { resEl.innerText = "ê¸°ë¡ì„ ë§ì”€í•˜ì„¸ìš”."; }, 1500);
                return;
            }

            // 2. ì°½ì‘ ë©”ëª¨(ì•„ì´ë””ì–´) ì§€ëŠ¥í˜• ìš”ì•½ (ì¶”ì„ìƒˆ ì œê±°)
            if (currentTarget === 'idea') {
                const fillers = ["ìŒ", "ì–´", "ê·¸ë‹ˆê¹Œ", "ìˆì–ì•„", "ë§‰", "ì•½ê°„", "ì €ê¸°", "ê·¸ëŸ¬ë‹ˆê¹Œ", "ì–´ìŒ"];
                fillers.forEach(f => {
                    const regex = new RegExp(f + "\\s*", "g");
                    transcript = transcript.replace(regex, "");
                });
                transcript = "ğŸ“Œ " + transcript.trim();
            }

            // 3. ì¼ì • ì„¹ì…˜ ì‹œê°„ íŒŒì‹± (11ì‹œ 40ë¶„ ì •í™•ë„ ê°œì„ )
            if (currentTarget === 'routine') {
                const timeMatch = transcript.match(/(\d+)\s*ì‹œ\s*(?:(\d+)\s*ë¶„)?/);
                if (timeMatch) {
                    const hh = timeMatch[1];
                    const mm = timeMatch[2] || "00";
                    const task = transcript.replace(timeMatch[0], "").replace(/ì˜¤ì „|ì˜¤í›„/g, "").trim();
                    resEl.innerHTML = `<b style="color:var(--accent);">[${hh}:${mm}]</b> ${task}`;
                    return;
                }
            }

            resEl.innerText = transcript;
        };

        setInterval(updateDisplay, 1000);
        updateDisplay();
    </script>
</body>
</html>
